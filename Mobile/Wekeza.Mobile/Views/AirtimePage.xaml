<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Wekeza.Mobile.Views.AirtimePage"
             xmlns:viewmodel="clr-namespace:Wekeza.Mobile.ViewModels"
             x:DataType="viewmodel:AirtimeViewModel"
             Title="Buy Airtime"
             BackgroundColor="#F5F5F5">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <Frame BackgroundColor="White" CornerRadius="15" Padding="20" HasShadow="True">
                <VerticalStackLayout Spacing="15">

                    <Label Text="Purchase airtime for yourself or others"
                           FontSize="14"
                           TextColor="#666666"
                           HorizontalTextAlignment="Center"
                           Margin="0,0,0,10"/>

                    <!-- From Account -->
                    <Label Text="From Account"
                           FontSize="14"
                           TextColor="#666666"/>
                    
                    <Frame Padding="0" CornerRadius="10" BorderColor="#DDDDDD" HasShadow="False">
                        <Entry Text="{Binding FromAccountNumber}"
                               IsReadOnly="True"
                               TextColor="#333333"
                               Margin="15,10"/>
                    </Frame>

                    <!-- Phone Number -->
                    <Label Text="Phone Number"
                           FontSize="14"
                           TextColor="#666666"
                           Margin="0,10,0,0"/>
                    
                    <Frame Padding="0" CornerRadius="10" BorderColor="#DDDDDD" HasShadow="False">
                        <Entry Text="{Binding PhoneNumber}"
                               Placeholder="e.g., 254712345678"
                               Keyboard="Telephone"
                               TextColor="#333333"
                               Margin="15,10"/>
                    </Frame>

                    <!-- Quick Amount Selection -->
                    <Label Text="Quick Select Amount (KES)"
                           FontSize="14"
                           TextColor="#666666"
                           Margin="0,10,0,0"/>

                    <FlexLayout Wrap="Wrap" JustifyContent="SpaceBetween">
                        <Button Text="10" 
                                Command="{Binding SelectQuickAmountCommand}"
                                CommandParameter="10"
                                BackgroundColor="#E8F5E9"
                                TextColor="#2E7D32"
                                FontSize="14"
                                CornerRadius="8"
                                WidthRequest="70"
                                Margin="5"/>
                        <Button Text="20" 
                                Command="{Binding SelectQuickAmountCommand}"
                                CommandParameter="20"
                                BackgroundColor="#E8F5E9"
                                TextColor="#2E7D32"
                                FontSize="14"
                                CornerRadius="8"
                                WidthRequest="70"
                                Margin="5"/>
                        <Button Text="50" 
                                Command="{Binding SelectQuickAmountCommand}"
                                CommandParameter="50"
                                BackgroundColor="#E8F5E9"
                                TextColor="#2E7D32"
                                FontSize="14"
                                CornerRadius="8"
                                WidthRequest="70"
                                Margin="5"/>
                        <Button Text="100" 
                                Command="{Binding SelectQuickAmountCommand}"
                                CommandParameter="100"
                                BackgroundColor="#E8F5E9"
                                TextColor="#2E7D32"
                                FontSize="14"
                                CornerRadius="8"
                                WidthRequest="70"
                                Margin="5"/>
                        <Button Text="200" 
                                Command="{Binding SelectQuickAmountCommand}"
                                CommandParameter="200"
                                BackgroundColor="#E8F5E9"
                                TextColor="#2E7D32"
                                FontSize="14"
                                CornerRadius="8"
                                WidthRequest="70"
                                Margin="5"/>
                        <Button Text="500" 
                                Command="{Binding SelectQuickAmountCommand}"
                                CommandParameter="500"
                                BackgroundColor="#E8F5E9"
                                TextColor="#2E7D32"
                                FontSize="14"
                                CornerRadius="8"
                                WidthRequest="70"
                                Margin="5"/>
                        <Button Text="1000" 
                                Command="{Binding SelectQuickAmountCommand}"
                                CommandParameter="1000"
                                BackgroundColor="#E8F5E9"
                                TextColor="#2E7D32"
                                FontSize="14"
                                CornerRadius="8"
                                WidthRequest="70"
                                Margin="5"/>
                    </FlexLayout>

                    <!-- Amount -->
                    <Label Text="Or Enter Custom Amount (KES)"
                           FontSize="14"
                           TextColor="#666666"
                           Margin="0,10,0,0"/>
                    
                    <Frame Padding="0" CornerRadius="10" BorderColor="#DDDDDD" HasShadow="False">
                        <Entry Text="{Binding Amount}"
                               Placeholder="0.00"
                               Keyboard="Numeric"
                               TextColor="#333333"
                               Margin="15,10"/>
                    </Frame>

                    <!-- Buy Button -->
                    <Button Text="Buy Airtime"
                            Command="{Binding BuyAirtimeCommand}"
                            BackgroundColor="#2E7D32"
                            TextColor="White"
                            FontSize="16"
                            FontAttributes="Bold"
                            CornerRadius="10"
                            HeightRequest="50"
                            Margin="0,20,0,0"
                            IsEnabled="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}"/>

                    <!-- Loading Indicator -->
                    <ActivityIndicator IsRunning="{Binding IsLoading}"
                                      IsVisible="{Binding IsLoading}"
                                      Color="#2E7D32"
                                      HorizontalOptions="Center"/>

                    <!-- Result Message -->
                    <Frame IsVisible="{Binding ShowResult}"
                           BackgroundColor="#E8F5E9"
                           BorderColor="#4CAF50"
                           CornerRadius="10"
                           Padding="15"
                           Margin="0,10,0,0">
                        <Label Text="{Binding ResultMessage}"
                               TextColor="#2E7D32"
                               FontSize="14"
                               HorizontalTextAlignment="Center"/>
                    </Frame>

                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
